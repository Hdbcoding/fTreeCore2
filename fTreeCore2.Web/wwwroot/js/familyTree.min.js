(function(n,t){"use strict";function e(){var n=255*Math.random()|0,t=255*Math.random()|0,i=255*Math.random()|0;return"rgb("+n+","+t+","+i+")"}function o(n){for(let r=0;r<i.length;r++){var t=i[r];if(t._container==n)return t}return!1}var r=t.canvasApi=t.canvasApi||{},u={container:"",width:500,height:500},i=[],f={_init:function(t,i,r){this._container=t;this._width=i;this._height=r;this._$canvas=this._$canvas||n("<canvas>").attr({width:i,height:r}).appendTo(t);this._elements=this._elements||[];this._ctx=this.ctx||this._$canvas[0].getContext("2d");this._offsetX=this._offsetY=0;this._zoomFactor=1},clear:function(){var n=this.getCoordinates(0,0),t=this.getCoordinates(this._width,this._height),i=t.x-n.x,r=t.y-n.y;this._ctx.fillStyle="black";this._ctx.fillRect(n.x,n.y,i,r);this._ctx.strokeStyle=e();this._ctx.strokeRect(n.x,n.y,i,r)},addElement:function(n){this.containsElement(n)||this._elements.push(n)},removeAllElements:function(){this._elements=[];this.render()},removeElement:function(n){var t=this._elements.indexOf(n);t!==-1&&this._elements.splice(t,1)},containsElement:function(n){return this._elements.includes(n)},render:function(){this.clear();this._elements.forEach(n=>n.draw(this._ctx))},getElementsAt:function(n,t){return this._elements.filter(i=>i.isInBounds(n,t))},bringToFront:function(n){var i=this._elements.indexOf(n),t=this._elements.length-1,r;i!=t&&(r=this._elements[t],this._elements[i]=r,this._elements[t]=n)},_transform:function(){this._ctx.setTransform(this._zoomFactor,0,0,this._zoomFactor,this._offsetX,this._offsetY)},panBy:function(n,t){this._offsetX+=n;this._offsetY+=t;this._transform()},panTo:function(n,t){this._offsetX=n;this._offsetY=t;this._transform()},resetPan:function(){this.panTo(0,0)},zoom:function(n,t,i){t=t||this._width/2;i=i||this._height/2;this._zoomFactor*=n;this._offsetX=t*(1-n)+this._offsetX*n;this._offsetY=i*(1-n)+this._offsetY*n;this._transform()},resetZoom:function(){this._zoomFactor=1;this._transform()},reset:function(){this.resetZoom();this.resetPan()},getCoordinates:function(n,t){return this.getScaled(n-this._offsetX,t-this._offsetY)},getScaled:function(n,t){return{x:n/this._zoomFactor,y:t/this._zoomFactor}}};r.init=function(t){var r=n.extend(!0,{},u,t),s=o(r.container);if(s)return s;let e=Object.create(f);return e._init(r.container,r.width,r.height),e.clear(),i.push(e),e}})($,window),function(n,t){"use strict";function r(n,t,i,r,u,f){this._x=n;this._y=t;this._w=i;this._h=r;this._fill=u;this._stroke=f}function u(n,t,i){this._n1=n;this._n2=t;this._stroke=i;this._updateEndpoints()}function f(n,t,i,r){return Math.sqrt(Math.pow(r-t,2)+Math.pow(i-n,2))}var i=t.visualElement=t.visualElement||{};r.prototype={isInBounds:function(n,t){return n>=this._x&&n<=this._x+this._w&&t>=this._y&&t<=this._y+this._h},draw:function(n){n.beginPath();n.rect(this._x,this._y,this._w,this._h);n.fillStyle=this._fill;n.fill();n.strokeStyle=this._stroke;n.stroke();n.closePath()},moveBy:function(n,t){this._x+=n;this._y+=t},moveTo:function(n,t){this._x=n;this._y=t}};i.createNode=function(n=0,t=0,i=50,u=50,f="white",e="red"){return new r(n,t,i,u,f,e)};u.prototype={isInBounds:function(n,t){var i=this.getEndpoints(),r=Math.abs((i.y2-i.y1)*n-(i.x2-i.x1)*t+i.x2*i.y1-i.y2-i.x1)/f(i.x1,i.y1,i.x2,i.y2);return r<10},draw:function(n){var t=this.getEndpoints();n.beginPath();n.moveTo(t.x1,t.y1);n.lineTo(t.x2,t.y2);n.strokeStyle=this._stroke;n.stroke();n.closePath()},getEndpoints:function(){return this._updateEndpoints(),{x1:this._x1,x2:this._x2,y1:this._y1,y2:this._y2}},_updateNodePositions:function(){var u=!1,n={x:this._n1._x,y:this._n1._y,w:this._n1._w,h:this._n1._h},t={x:this._n2._x,y:this._n2._y,w:this._n2._w,h:this._n2._h},r=this._oldN1||{},i=this._oldN2||{};return(n.x!=r.x||n.y!=i.y||n.w!=r.w||n.h!=r.h||t.x!=i.x||t.y!=i.y||t.w!=i.w||t.h!=i.h)&&(u=!0),this._oldN1=n,this._oldN2=t,u},_updateEndpoints:function(){this._updateNodePositions()&&(this._x1=(2*this._oldN1.x+this._oldN1.w)/2,this._x2=(2*this._oldN2.x+this._oldN2.w)/2,this._y1=(2*this._oldN1.y+this._oldN1.h)/2,this._y2=(2*this._oldN2.y+this._oldN2.h)/2)}};i.createEdge=function(n,t,i="green"){return new u(n,t,i)}}(jQuery,window),function(n,t){"use strict";function u(r){n(i.clear).on("click",function(){r.removeAllElements()});n(i.zoomIn).on("click",function(){r.zoom(1.25);r.render()});n(i.zoomOut).on("click",function(){r.zoom(.8);r.render()});n(i.zoomReset).on("click",function(){r.resetZoom();r.render()});n(i.panReset).on("click",function(){r.resetPan();r.render()});r._$canvas.on("wheel",function(n){var t=n.originalEvent.deltaY,i=t?t<0?1.25:.8:1;r.zoom(i,n.offsetX,n.offsetY);r.render()});var s=!1,c=!1,l={x:0,y:0},h={x:0,y:0},f={x:0,y:0},e=[],u=!1,o={x:0,y:0};r._$canvas.on("mousedown",function(n){h=f=l={x:n.offsetX,y:n.offsetY};s=!0;c=!1;o=r.getCoordinates(l.x,l.y);e=r.getElementsAt(o.x,o.y);e.length&&(u=e[0])});r._$canvas.on("mousemove",function(n){var t,i,e;h=f;f={x:n.offsetX,y:n.offsetY};t=f.x-h.x;i=f.y-h.y;c=!0;s&&u?(e=r.getScaled(t,i),u.moveBy(e.x,e.y),r.bringToFront(u),r.render()):s&&!u&&(r.panBy(t,i),r.render())});r._$canvas.on("mouseup",function(n){var f={x:n.offsetX,y:n.offsetY},i;c||(u?console.log(e):(i=t.visualElement.createNode(o.x,o.y),r.addElement(i),r.render()));s=!1;e=[];u=!1})}var r=t.eventApi=t.eventApi||{},i={canvasContainer:"#canvas-container",canvasWidth:1366,canvasHeight:720,clear:"#clear",zoomIn:"#zoom-in",zoomOut:"#zoom-out",zoomReset:"#zoom-reset",panReset:"#pan-reset"};r.init=function(r){n.extend(!0,i,r);var f=t.canvasApi.init({container:i.canvasContainer,height:i.canvasHeight,width:i.canvasWidth});f.render();u(f)}}(jQuery,window);